<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
  <meta charset="utf-8">
  <title>JS Bin</title>
  <style>
    html,body,.menu{
      height: 100%;
      margin: 0;
    }

    .menu {
      background: #333;
      color: #fff;
      line-height: 1.5;
      width: 200px;
      float: left;
    }
    .menu a {
      color: #ccc;
    }
    .main {
      margin-left: 210px;
    }


    .tree,
    .tree ul,
    .tree li {
      margin: 0;
      padding: 0;
      list-style: none;
    }
    .tree li{
      padding-left: 2em;
    }

    .tree>li {
      padding-top: 20px;
    }
    .tree{
      padding-bottom: 20px;
    }


    .tree span:before {
      content: '-';
      display: inline-block;
      margin-right: 10px;
    }

    .tree .children>span:before {
      content:'+'
    }
    .tree .children.open>span:before {
      content:'-'
    }
    .tree .children>ul {
      display: none;
    }
    .tree .children.open>ul {
      display: block;
    }


  </style>
</head>
<body>
  <div class="menu">
    <!--
    <ul class="tree">
      <li class="children open">
        <span>课程</span>
        <ul>
          <li>
            <span>后端</span>
          </li>
          <li class="children">
            <span>前端</span>
            <ul>
              <li>
                <span>必修班</span>
              </li>
              <li>
                <span>任务班</span>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li class="children">
        <span>文章</span>
        <ul>
          <li>
            <span>技术</span>
          </li>
          <li>
            <span>灌水</span>
          </li>
        </ul>
      </li>
    </ul>-->
  </div>
  <div class="main"></div>

<script>
  
(function($){
  $.fn.tree = function(data){
    var $node = $('<ul class="tree"></ul>')
    createNode($node,data)
    console.log(this)
    this.append($node)
    
    $node.on('click', 'span', function(){
      var $span = $(this)
      var $parent = $span.parent()
      //var $children = $parent.children('ul')
      if($parent.hasClass('children')){
        //$children.slideToggle()
        $parent.toggleClass('open')
      }
    })
  }
  
  function createNode($tree, data){
      $.each(data, function(index, item){
        var $li = $('<li></li>')
        var $title = $('<span></span>')

        if(item.link){
          $title.html('<a href="'+item.link+'">' + item.title + '</a>')
        }else{
          $title.text(item.title)
        }
        $li.append($title)

        if(item.is_open){
          $li.addClass('open')
        }
        if(item.children){
          $li.addClass('children')
          var $ul = $('<ul></ul>')
          createNode($ul, item.children)
          $li.append($ul)
        }
        $tree.append($li)
      })

  }
  
})(jQuery)







var treeData = [
  {
    title: '课程',
    children: [
      {
        title: '后端',
        link: '#1'
      },
      {
        title: '前端',
        children: [
          {
            title: '必修班',
            link: '#2'
          },
          {
            title: '任务班',
            link: '#3'
          }
        ]
      }
    ]
  },
  {
    title: '文章',
    is_open: true,
    children: [
      {
        title: '技术',
        link: '#4'
      },
      {
        title: '灌水',
        link: '#5'
      }
    ]
  }
]


$('.menu').tree(treeData)
$('.menu').tree(treeData)





</script>

</body>
</html>